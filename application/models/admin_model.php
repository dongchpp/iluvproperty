<?phpif (!defined('BASEPATH'))    exit('No direct script access allowed');class Admin_Model extends CI_Model {    function Admin_Model() {        parent::__construct();    }    function getListingsByUserID($dataArr = array(), $userSN = 0, $listingTypeSN = 0) {        $sql = "select ul.*, lm.name as PropertyType, lm1.name as listingType, lm2.name as listingStatus, (select imageName from mo_userlistingimages where userListingSN = ul.sn and status = 'Y' limit 1 ) as imageName from mo_userlistings ul left join mo_listing_master lm ON ul.apartmentTypeSN = lm.sn left join mo_listing_master lm1 ON ul.listingTypeSN = lm1.sn left join mo_listing_master lm2 ON ul.listingStatusSN = lm2.sn where ul.status = 'Y'";        if (!empty($dataArr)) {            foreach ($dataArr as $key => $value) {                if ($key != "queryString") {                    $sql .= "and $key = $value ";                }            }            if (array_key_exists('queryString', $dataArr)){                $sql .= $dataArr['queryString'];            }        }        if ($userSN > 0 && $listingTypeSN > 0) {            $sql .= " and ul.userAgentSN = ? and ul.listingTypeSN = ?";            $result = $this->db->query($sql, array($userSN, $listingTypeSN));        } else if ($userSN > 0) {            $sql .= " and ul.userAgentSN = ?";            $result = $this->db->query($sql, array($userSN));        } else if ($listingTypeSN > 0) {            $sql .= " and ul.listingTypeSN = ?";            $result = $this->db->query($sql, array($listingTypeSN));        } else {            $result = $this->db->query($sql);        }        //echo $sql;        return $result->result_array();    }    function getListingsTypes($typeSN, $status = '') {        $arr = array();        $arr['type'] = $typeSN;        if (!empty($status)) {            $arr['status'] = $status;        }        $result = $this->db->get_where('mo_listing_master', $arr);        return $result->result_array();    }}